<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .festival_header, .festival_table, .festival_paging{
            display: flex;
            justify-content: center;
            margin: 0 auto;
        }
    </style>
</head>
<body>
<div>
    <div class="festival_header">
        <h2>Festival List</h2>
    </div>
    <div class="festival_table">
        <table>
            <thead>
                <tr>
                    <th>축제명</th>
                    <th>개최기간</th>
                </tr>
            </thead>
            <tbody>
            {% if festival_list %}
                {% for row in festival_list %}
                <tr>
                    <td>
                        {% if row.image_url %}
                            <img src="{{ row.image_url|slice:'1:' }}" width="100" height="100">
                        {% else %}
                            <img src="{% static 'myApp/assets/no_image_icon.png' %}" width="100" height="100">
                        {% endif %}
                        <a href="{% url 'festival_detail' row.festival_id %}">{{ row.festival_name }}</a></td>
                    <td>{{ row.start_date|date:'Y-m-d' }} ~ {{ row.end_date|date:'Y-m-d' }}</td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td>축제 목록을 불러오지 못했거나 등록된 축제가 없습니다.</td>
                </tr>
            {% endif %}
            </tbody>
        </table>
    </div>

    <!-- paging -->
    <div>
        <div class="festival_paging">
            <div>
                {% if festival_list.has_previous %}
                    <a href="?page=1">맨 앞으로</a>
                    <a href="?page={{ festival_list.previous_page_number }}">이전</a>
                {% endif %}
            </div>

            <div>
                {% for page in festival_list.paginator.page_range %}
                    {% if page >= festival_list.number|add:-2 and page <= festival_list.number|add:2 %}
                    <span>
                        <a href="?page={{ page }}">{{ page }}</a>
                    </span>
                    {% elif page >= festival_list.number|add:-2 and page <= festival_list.number|add:3 %}
                        ..
                    {% endif %}
                {% endfor %}
            </div>

            <div>
                {% if festival_list.has_next %}
                    <a href="?page={{ festival_list.next_page_number }}">다음</a>
                    <a href="?page={{ festival_list.paginator.num_pages}} ">맨 뒤로</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
</body>
</html>